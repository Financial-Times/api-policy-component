
varnish:
  shortName: "semanticReaderVarnish"
  path: content/
  timeout: 4000ms
  connectionTimeout: 1s
  primaryNodes: "localhost:9090:9091"

pipeline:
  webUrlTemplates:
    "http://www.ft.com/ontology/origin/FTComMethode" : "https://www.ft.com/content/{{identifierValue}}"
    "http://www.ft.com/ontology/origin/FT-CLAMO"  : "https://www.ft.com/fastft?post={{identifierValue}}"
    "http://www.ft.com/ontology/origin/FT-LABS-WP-1-24" : "{{identifierValue}}"
    "http://www.ft.com/ontology/origin/FT-LABS-WP-1-91" : "{{identifierValue}}"
    "http://api.ft.com/system/FTCOM-METHODE" : "https://www.ft.com/content/{{identifierValue}}"
    "http://api.ft.com/system/FT-CLAMO"  : "https://www.ft.com/fastft?post={{identifierValue}}"
    "http://api.ft.com/system/FT-LABS-WP-1-[0-9]+" : "{{identifierValue}}"
    "http://api.ft.com/system/NEXT-VIDEO-EDITOR" : "https://www.ft.com/content/{{identifierValue}}"

server:

  applicationConnectors:
      - type: http
        port: 20080

  adminConnectors:
      - type: http
        port: 20082

  requestLog:
    appenders:
      - type: console
        # Add transaction_id to the end of Dropwizard's default format, which is itself based on the "combined" log format
        logFormat: "%h %l %u [%t] \"%r\" %s %b \"%i{Referer}\" \"%i{User-Agent}\" %D transaction_id=%i{X-Request-Id}"
        # The timezone used to format dates. HINT: USE THE DEFAULT, UTC.
        timeZone: UTC

logging:

  level: INFO

  loggers:
    io.dropwizard: DEBUG
    com.ft.jerseyhttpwrapper.AttemptLogger: WARN
    com.ft.api.util.transactionid.TransactionIdFilter: WARN

  appenders:

    - type: console
      logFormat: "%-5p [%d{ISO8601, GMT}] %c: %X{transaction_id} %m [%thread]%n%xEx"

appInfo:
    systemCode: "APIPolicyComponent"
    description: "ApiPolicyApplication"

canonicalWebUrlTemplate: "https://www.ft.com/content/%s"
